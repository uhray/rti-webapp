<script>
  import { onMount } from 'svelte';

  // ========================= Quill.js Config ================== //
  let quill;
  let htmlContent = 'type above';
  let content = undefined;

  let iconImages = {
    bold:
      '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3359 11.2852C15.9648 10.6836 16.375 9.86328 16.375 8.90625C16.375 7.10156 14.8984 5.625 13.0938 5.625H8.0625C7.81641 5.625 7.625 5.84375 7.625 6.0625V6.5C7.625 6.74609 7.81641 6.9375 8.0625 6.9375H8.5V16.5625H8.0625C7.81641 16.5625 7.625 16.7812 7.625 17V17.4375C7.625 17.6836 7.81641 17.875 8.0625 17.875H13.75C15.6641 17.875 17.25 16.3164 17.25 14.375C17.25 13.0352 16.457 11.8867 15.3359 11.2852ZM10.25 6.9375H12.6562C13.7227 6.9375 14.625 7.83984 14.625 8.90625C14.625 10 13.7227 10.875 12.6562 10.875H10.25V6.9375ZM13.3125 16.5625H10.25V12.1875H13.3125C14.5156 12.1875 15.5 13.1719 15.5 14.375C15.5 15.6055 14.5156 16.5625 13.3125 16.5625Z" fill="#595F76"/></svg>',
    italic:
      '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.375 6.0625C16.375 5.84375 16.1562 5.625 15.9375 5.625H10.6875C10.4414 5.625 10.25 5.84375 10.25 6.0625V6.5C10.25 6.74609 10.4414 6.9375 10.6875 6.9375H12.3008L9.89453 16.5625H8.0625C7.81641 16.5625 7.625 16.7812 7.625 17V17.4375C7.625 17.6836 7.81641 17.875 8.0625 17.875H13.3125C13.5312 17.875 13.75 17.6836 13.75 17.4375V17C13.75 16.7812 13.5312 16.5625 13.3125 16.5625H11.6992L14.1055 6.9375H15.9375C16.1562 6.9375 16.375 6.74609 16.375 6.5V6.0625Z" fill="#595F76"/></svg>',
    strike:
      '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.10156 10.4375H12.1914L10.9336 9.80859C10.5234 9.61719 10.2227 9.17969 10.2227 8.6875C10.2227 8.22266 10.5234 7.78516 10.9336 7.59375C11.1797 7.45703 11.4531 7.40234 11.7539 7.375H13.4766C13.8594 7.375 14.2422 7.59375 14.4609 7.89453L14.8711 8.44141C14.9531 8.55078 15.0898 8.60547 15.2266 8.60547C15.3086 8.60547 15.418 8.57812 15.4727 8.52344L16.1836 8.00391C16.293 7.92188 16.375 7.78516 16.375 7.64844C16.375 7.53906 16.3203 7.45703 16.2656 7.375L15.8555 6.82812C15.3086 6.11719 14.4336 5.625 13.4766 5.625H11.7539C11.1797 5.65234 10.6328 5.78906 10.1406 6.00781C9.04688 6.58203 8.39062 7.73047 8.5 8.96094C8.55469 9.50781 8.77344 10.0273 9.10156 10.4375ZM18.5625 11.3125H5.4375C5.19141 11.3125 5 11.5312 5 11.75V12.1875C5 12.4336 5.19141 12.625 5.4375 12.625H18.5625C18.7812 12.625 19 12.4336 19 12.1875V11.75C19 11.5312 18.7812 11.3125 18.5625 11.3125ZM16.0195 13.5H13.5312L13.9141 13.7188C14.3242 13.9102 14.625 14.3477 14.625 14.8398C14.625 15.3047 14.3242 15.7422 13.9141 15.9336C13.668 16.0703 13.3945 16.125 13.0938 16.125H11.3984H11.3711C10.9883 16.125 10.6055 15.9336 10.3867 15.6328L9.97656 15.0859C9.89453 14.9766 9.75781 14.9219 9.62109 14.9219C9.53906 14.9219 9.42969 14.9492 9.375 15.0039L8.66406 15.5234C8.55469 15.6055 8.47266 15.7422 8.47266 15.8789C8.47266 15.9883 8.52734 16.0703 8.58203 16.125L8.99219 16.6992C9.53906 17.4102 10.4141 17.875 11.3711 17.875H13.0938C13.668 17.875 14.2148 17.7383 14.707 17.5195C15.8008 16.9453 16.457 15.7969 16.3477 14.5664C16.3203 14.1836 16.1836 13.8281 16.0195 13.5Z" fill="#595F76"/></svg>',
    link:
      '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2305 15.5508C14.5977 14.1836 14.5977 11.9141 13.2305 10.5195C12.875 10.1914 12.4922 9.94531 12.082 9.75391C11.918 9.69922 11.6992 9.78125 11.6445 9.97266C11.6172 10.1094 11.5898 10.2461 11.5625 10.3828C11.5625 10.5195 11.6445 10.6562 11.7812 10.7109C12.0547 10.8203 12.3008 11.0117 12.5195 11.2305C13.5312 12.2148 13.5312 13.8555 12.5469 14.8398L12.5195 14.8672L10.3594 17.0273C9.34766 18.0391 7.73438 18.0391 6.72266 17.0273C5.71094 16.0156 5.71094 14.4023 6.72266 13.3906C6.72266 13.3906 8.33594 11.7773 8.77344 11.3398C8.85547 11.2578 8.88281 11.1484 8.88281 11.0664C8.85547 10.9297 8.85547 10.793 8.85547 10.6562C8.82812 10.3828 8.5 10.2461 8.28125 10.4375C8.25391 10.4648 8.22656 10.4922 8.19922 10.5195L6.03906 12.707C4.64453 14.0742 4.64453 16.3438 6.03906 17.7109C7.40625 19.1055 9.67578 19.1055 11.043 17.7109L13.2305 15.5508ZM10.7422 13.0078C11.0977 13.3359 11.4805 13.582 11.8906 13.7734C12.0547 13.8281 12.2734 13.7461 12.3281 13.5547C12.3555 13.418 12.3828 13.2812 12.4102 13.1445C12.4102 13.0078 12.3281 12.8711 12.1914 12.8164C11.918 12.707 11.6719 12.5156 11.4531 12.2969C10.4414 11.3125 10.4414 9.67188 11.4258 8.6875L11.4531 8.66016L13.6133 6.5C14.625 5.48828 16.2383 5.48828 17.25 6.5C18.2617 7.51172 18.2617 9.125 17.25 10.1367C17.25 10.1367 15.6367 11.75 15.1992 12.1875C15.1172 12.2695 15.0898 12.3789 15.0898 12.4609C15.1172 12.5977 15.1172 12.7344 15.1172 12.8711C15.1445 13.1445 15.4727 13.2812 15.6914 13.0898C15.7188 13.0625 15.7461 13.0352 15.7734 13.0078L17.9336 10.8203C19.3281 9.45312 19.3281 7.18359 17.9336 5.81641C16.5664 4.42188 14.2969 4.42188 12.9297 5.81641L10.7422 7.97656C9.375 9.34375 9.375 11.6133 10.7422 13.0078Z" fill="#595F76"/></svg>',
    list:
      '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.40625 6.28125H6.09375C5.84766 6.28125 5.65625 6.5 5.65625 6.71875V8.03125C5.65625 8.27734 5.84766 8.46875 6.09375 8.46875H7.40625C7.625 8.46875 7.84375 8.27734 7.84375 8.03125V6.71875C7.84375 6.5 7.625 6.28125 7.40625 6.28125ZM7.40625 10.6562H6.09375C5.84766 10.6562 5.65625 10.875 5.65625 11.0938V12.4062C5.65625 12.6523 5.84766 12.8438 6.09375 12.8438H7.40625C7.625 12.8438 7.84375 12.6523 7.84375 12.4062V11.0938C7.84375 10.875 7.625 10.6562 7.40625 10.6562ZM7.40625 15.0312H6.09375C5.84766 15.0312 5.65625 15.25 5.65625 15.4688V16.7812C5.65625 17.0273 5.84766 17.2188 6.09375 17.2188H7.40625C7.625 17.2188 7.84375 17.0273 7.84375 16.7812V15.4688C7.84375 15.25 7.625 15.0312 7.40625 15.0312ZM18.7812 15.6875H9.59375C9.45703 15.6875 9.375 15.7969 9.375 15.9062V16.3438C9.375 16.4805 9.45703 16.5625 9.59375 16.5625H18.7812C18.8906 16.5625 19 16.4805 19 16.3438V15.9062C19 15.7969 18.8906 15.6875 18.7812 15.6875ZM18.7812 6.9375H9.59375C9.45703 6.9375 9.375 7.04688 9.375 7.15625V7.59375C9.375 7.73047 9.45703 7.8125 9.59375 7.8125H18.7812C18.8906 7.8125 19 7.73047 19 7.59375V7.15625C19 7.04688 18.8906 6.9375 18.7812 6.9375ZM18.7812 11.3125H9.59375C9.45703 11.3125 9.375 11.4219 9.375 11.5312V11.9688C9.375 12.1055 9.45703 12.1875 9.59375 12.1875H18.7812C18.8906 12.1875 19 12.1055 19 11.9688V11.5312C19 11.4219 18.8906 11.3125 18.7812 11.3125Z" fill="#595F76"/></svg>',
    attach:
      '<svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.07422 19.25C9.97656 19.25 10.8789 18.9219 11.5625 18.2383L17.5234 12.2773C17.6328 12.1406 17.6328 11.9492 17.5234 11.8125L17.3594 11.6484C17.2227 11.5391 17.0312 11.5391 16.8945 11.6484L10.9336 17.6094C9.89453 18.6484 8.22656 18.6484 7.1875 17.6094C6.14844 16.5703 6.14844 14.9023 7.1875 13.8633L14.3516 6.69922C15.0898 5.96094 16.293 5.96094 17.0039 6.69922C17.7422 7.41016 17.7422 8.61328 17.0039 9.35156L10.9336 15.4492C10.4961 15.8594 9.78516 15.8594 9.34766 15.4492C8.9375 15.0117 8.9375 14.3008 9.34766 13.8633L14.0234 9.21484C14.1328 9.07812 14.1328 8.88672 14.0234 8.75L13.8594 8.58594C13.7227 8.47656 13.5312 8.47656 13.3945 8.58594L8.74609 13.2617C7.95312 14.0273 7.95312 15.2852 8.74609 16.0508C9.51172 16.8438 10.7695 16.8438 11.5352 16.0508L17.6328 9.98047C18.6992 8.88672 18.6992 7.13672 17.6328 6.07031C16.5664 5.00391 14.8164 5.00391 13.7227 6.07031L6.55859 13.2344C5.19141 14.6016 5.19141 16.8438 6.55859 18.2383C7.24219 18.9219 8.17188 19.25 9.07422 19.25Z" fill="#595F76"/></svg>',
  };

  onMount(async () => {
    const { default: Quill } = await import('quill');

    let icons = Quill.import('ui/icons');
    for (const [key, value] of Object.entries(iconImages)) {
      icons[key] = value;
    }

    quill = new Quill('#editor', {
      theme: 'snow',
      placeholder: 'Type something...',
      modules: {
        toolbar: '#toolbar',
      },
    });
  });
  const updateContent = () => {
    content = quill.getText();
    htmlContent = quill.root.innerHTML;
  };
  const doSomething = () => {
    console.log('send button clicked');
  };
  // =========================================================== //
</script>

<style src="./RichText.scss">

</style>

<!-- HTML -->
<section class="RichText">
  <div class="RichText-container">
    <div id="editor" class="RichText-editor" on:keyup={updateContent} />
    <div id="toolbar" class="RichText-toolbar">
      <button class="ql-bold" />
      <button class="ql-italic" />
      <button class="ql-strike" />
      <button class="ql-link" />
      <button class="ql-list" />
      <div class="aligned-right">
        <button class="ql-attach" />
        <button class="send-msg" on:click={doSomething}>
          <svg
            width="24"
            height="25"
            viewBox="0 0 24 25"
            fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M18.0156 5.35938L5.32812 12.6602C4.83594 12.9336 4.89062
              13.6445 5.38281 13.8359L8.30859 15.0664L16.1562 8.14844C16.293
              8.01172 16.5117 8.20312 16.375 8.36719L9.8125
              16.3789V18.5938C9.8125 19.25 10.5781 19.4961 10.9609
              19.0312L12.7109 16.8984L16.1016 18.3477C16.4844 18.5117 16.9492
              18.2656 17.0039 17.8281L18.9727 6.01562C19.082 5.46875 18.4805
              5.08594 18.0156 5.35938Z"
              fill="#243E93" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <br />
  Resulting HTML:
  {@html htmlContent}
</section>
